{% extends 'community/base.html' %} {% block content %} {% if messages %} 
{% for message in messages%}

<script>
    alert('{{ message }}');
</script>

{% endfor %} {% endif %}

<br /><br /><br /><br />
<div class="container">
    <div class="ms-5 me-5">
        <div class="row">
            <div class="col-12 mb-5">
                <h1>
                    {{ post.title }}
                </h1>
            </div>
        </div>

        <div class="row">
            <div class="col-12 mb-3">
                <h4>
                    {{ post.author }} | {{ post.date | date:'Y.m.d' }}
                </h4>
            </div>
        </div>

        <hr />

        {{ post.content | safe}}

        <form action="" method="POST" class="mb-5">
            {% csrf_token %}
            <div class="text-center">
                <button type="submit" class="btn btn-outline-danger" style="font-size: 300%;">
                    ♥ {{ post.like }}
                </button>
            </div>
        </form>

        <div class="row">
            <form
                action="{% url 'community:comment_create' pk=post.pk %}"
                method="POST"
                class="mb-0"
            >
                {% csrf_token %}
                <label for="comment" class="form-label">댓글 {{ comments|length }}</label>
                <textarea
                    class="form-control h-75"
                    id="comment"
                    placeholder="댓글을 입력해주세요."
                    name="content"
                ></textarea>
                <br />
                <input type="submit" class="float-end btn btn-primary" value="댓글 등록" />
            </form>
        </div>

        <br /><br /><br />

        <div class="row">
            
                {% for comment in comments %} 
            <div class="col-12">
                {{ comment.author }} | {{ comment.date | date:'Y.m.d'}} 
                {% if user.username == comment.author %}
            
                <form
                    action="{% url 'community:comment_delete' post.pk comment.pk %}"
                    method="POST"
                    class="float-end"
                >
                    {% csrf_token %}
                    <input type="submit" class="btn btn-outline-danger" value="DELETE" />
                </form>
                {% endif %}
                <br />
                {{ comment }}
            </div>
            <hr />
            {% endfor %}
        </div>
        <br /><br />
    </div>
</div>

{% endblock content %}